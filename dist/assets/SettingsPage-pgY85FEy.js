import{t as B,v as G,r as c,w as A,j as o,x as F,y as k,z as L,D as K,A as V,T as Q,C as M,E as O,F as X,G as Z,M as $,H as q,I as ee,J as R,K as N,S as te,N as se,O as oe,B as m,c as ae,Q as W,R as ne,U as re,V as ie,W as S,X as le,Y as U,Z as ce,_ as de,a as y,$ as ue,a0 as fe,a1 as pe,a2 as me,a3 as xe,a4 as ge,a5 as he,a6 as ye,a7 as be,a8 as je,a9 as Ce,aa as Se,ab as Me,ac as E,ad as Ee,ae as De,af as ve,ag as we,ah as Ie,ai as Re,aj as Pe}from"./index-BvvL1rGo.js";import{s as b,a as T}from"./Toast-B5XXwoML.js";import{S as _}from"./Stack-BgDWLZld.js";import{M as Ae}from"./MasterForm-BRiRbtCm.js";function Fe(t){return B("MuiCardActions",t)}G("MuiCardActions",["root","spacing"]);const ke=t=>{const{classes:e,disableSpacing:s}=t;return L({root:["root",!s&&"spacing"]},Fe,e)},Le=F("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.root,!s.disableSpacing&&e.spacing]}})({display:"flex",alignItems:"center",padding:8,variants:[{props:{disableSpacing:!1},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),Qe=c.forwardRef(function(e,s){const a=A({props:e,name:"MuiCardActions"}),{disableSpacing:n=!1,className:r,...i}=a,l={...a,disableSpacing:n},d=ke(l);return o.jsx(Le,{className:k(d.root,r),ownerState:l,ref:s,...i})}),Te=t=>{const{classes:e}=t;return L({root:["root"]},V,e)},ze=F(Q,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),Je=c.forwardRef(function(e,s){const a=A({props:e,name:"MuiDialogTitle"}),{className:n,id:r,...i}=a,l=a,d=Te(l),{titleId:u=r}=c.useContext(K);return o.jsx(ze,{component:"h2",className:k(d.root,n),ownerState:l,ref:s,variant:"h6",id:r??u,...i})});function Ue(t){return B("MuiIcon",t)}G("MuiIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Be=t=>{const{color:e,fontSize:s,classes:a}=t,n={root:["root",e!=="inherit"&&`color${M(e)}`,`fontSize${M(s)}`]};return L(n,Ue,a)},Ge=F("span",{name:"MuiIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.root,s.color!=="inherit"&&e[`color${M(s.color)}`],e[`fontSize${M(s.fontSize)}`]]}})(O(({theme:t})=>({userSelect:"none",width:"1em",height:"1em",overflow:"hidden",display:"inline-block",textAlign:"center",flexShrink:0,variants:[{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:t.typography.pxToRem(20)}},{props:{fontSize:"medium"},style:{fontSize:t.typography.pxToRem(24)}},{props:{fontSize:"large"},style:{fontSize:t.typography.pxToRem(36)}},{props:{color:"action"},style:{color:(t.vars||t).palette.action.active}},{props:{color:"disabled"},style:{color:(t.vars||t).palette.action.disabled}},{props:{color:"inherit"},style:{color:void 0}},...Object.entries(t.palette).filter(X()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}}))]}))),P=c.forwardRef(function(e,s){const a=A({props:e,name:"MuiIcon"}),{baseClassName:n="material-icons",className:r,color:i="inherit",component:l="span",fontSize:d="medium",...u}=a,f={...a,baseClassName:n,color:i,component:l,fontSize:d},x=Be(f);return o.jsx(Ge,{as:l,className:k(n,"notranslate",x.root,r),ownerState:f,"aria-hidden":!0,ref:s,...u})});P.muiName="Icon";const $e=({label:t,items:e,labelKey:s,setSelectedItem:a,isLoading:n=!1,error:r=void 0,refetch:i=void 0,cardActions:l,...d})=>{const[u,f]=c.useState(null);return c.useEffect(()=>{a(e.find((x,p)=>p===u))},[e,u,a]),n?o.jsx(qe,{}):o.jsx(Z,{error:r,refetch:i,children:o.jsxs($,{cardContentProps:{sx:{p:0}},children:[o.jsx(Qe,{sx:{borderBottom:1,borderColor:"divider",flexShrink:0},children:l}),o.jsxs(q,{component:"nav",sx:{bgcolor:"background.paper",overflowY:"auto",flex:1},disablePadding:!0,children:[t?o.jsx(ee,{children:t}):null,e.length===0?o.jsx(R,{primary:"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö",sx:{textAlign:"center",py:4,width:"100%"}}):e.map((x,p)=>o.jsx(N,{selected:u===p,onClick:()=>{f(p),a(x)},...d,children:o.jsx(R,{primary:x[s]})},p))]})]})})},qe=()=>o.jsx(q,{component:"nav",sx:{bgcolor:"background.paper"},children:[...Array(5)].map((t,e)=>o.jsx(N,{children:o.jsx(R,{primary:o.jsx(te,{animation:"wave",height:30})})},e))}),Ne=({title:t,open:e,onClose:s,isSizeByContent:a,isHeightByContent:n,isFullScreen:r,isCloseOverseas:i,children:l})=>o.jsx(se,{open:e,onClose:s,"aria-hidden":!e,children:o.jsx(oe,{in:e,children:o.jsx(m,{sx:{...We,height:a||n?"auto":r?"98%":"90%",width:a?"auto":r?"99%":"95%"},children:o.jsxs(_,{display:"flex",gap:0,width:"100%",height:"100%",children:[i?null:o.jsxs(m,{display:"flex",justifyContent:"space-between",width:"100%",px:2,pt:2,children:[o.jsx(Q,{variant:"h6",p:.5,pl:2,fontWeight:400,children:W(t)}),o.jsx(m,{display:"flex",flexDirection:"row",children:o.jsx(ne,{onClick:s,icon:"CloseIcon",size:"medium"})})]}),o.jsx(m,{width:"100%",height:"100%",px:1,py:1,overflow:"auto",children:o.jsx(re,{children:l})})]})})})}),We={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",borderRadius:ae,boxShadow:24,display:"flex",flex:1,outline:"none"},_e={email:"Email",name:"–§–ò–û"},He=t=>_e[t.toLowerCase()]||t,D=(t,e)=>{let s=[];if(e&&e.length>0)s=e;else{const a=t.match(/Unique constraint failed on the fields: \(([^)]+)\)/i);a&&a[1]&&(s=a[1].split(",").map(n=>n.trim()))}if(s.length>0)return`–ó–∞–ø–∏—Å—å —Å —Ç–∞–∫–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ–º –¥–ª—è –ø–æ–ª—è '${s.map(He).join(", ")}' —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.`;if(t.toLowerCase().includes("unique constraint")||t.toLowerCase().includes("p2002"))return"–ó–∞–ø–∏—Å—å —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç."},Ye=t=>{if(!t)return"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ (–æ–±—ä–µ–∫—Ç –æ—à–∏–±–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç).";if(t.networkError)return typeof t.networkError.message=="string"&&t.networkError.message.toLowerCase().includes("failed to fetch")?"–ù–µ —É–¥–∞–ª–æ—Å—å —Å–≤—è–∑–∞—Ç—å—Å—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞—à–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É http://localhost:4000.":typeof t.networkError.message=="string"?`–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${t.networkError.message}`:"–ü—Ä–æ–∏–∑–æ—à–ª–∞ —Å–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞—à–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.";if(Array.isArray(t.graphQLErrors)&&t.graphQLErrors.length>0){const e=t.graphQLErrors[0];if(e.extensions?.originalError){const s=e.extensions.originalError;if(s.code==="P2002")return D(s.message,s.meta?.target);if(typeof s.message=="string")return s.message}if(typeof e.message=="string"){const s=D(e.message);return s||e.message}}if(typeof t.message=="string"){const e=D(t.message);return e||t.message}return typeof t=="string"?t:"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑."};function Ke(t,e){const s="–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ üò•",a=Ye(t);ie.error(S.createElement("div",null,S.createElement("span",null,s),a&&S.createElement("br"),a&&S.createElement("small",{style:{opacity:.8,display:"block",marginTop:"4px"}},a)))}const Ve=({title:t,open:e,onClose:s,isOnlyOk:a=!1,disableCancel:n=!1,disableNo:r=!1,isLoading:i=!1,isDisableSaveButton:l=!1,children:d=void 0})=>{const[u,f]=c.useState(!1),x=typeof d=="string"?{messages:[{key:d,options:{}}]}:d,p=x?.data;return c.useEffect(()=>{let g=null;return i?g=setTimeout(()=>f(!0),1e3):f(!1),()=>{g&&clearTimeout(g)}},[i]),o.jsx(le,{open:e,disableRestoreFocus:!0,children:o.jsxs(m,{children:[o.jsxs(Je,{sx:{display:"flex",alignItems:"end"},children:[o.jsx(P,{sx:{fontSize:"3rem"},color:"error",style:{marginRight:20,textAlign:"start"},children:U("WarningIcon")}),W(t)]}),o.jsx(m,{pb:1,children:x?.messages?.map(({key:g,messageType:h},C)=>o.jsxs(m,{px:3,display:"flex",gap:1,children:[h?o.jsx(P,{color:h,children:U(h==="warning"?"WarningIcon":"InfoIcon")}):null,o.jsx(Q,{children:g},C)]},C))}),o.jsx(m,{display:u?"flex":"none",justifyContent:"center",pb:1,children:o.jsx(ce,{})}),o.jsxs(de,{children:[o.jsx(y,{size:"medium",variant:"text",fullWidth:!0,label:"–û–∫",onClick:()=>s("ok",p),isDisabled:l||i,sx:{display:a?"flex":"none"}}),o.jsx(y,{size:"medium",variant:"text",fullWidth:!0,label:"–î–∞",onClick:()=>s("yes",p),isDisabled:l||i,sx:{display:a?"none":"flex"},color:"error"}),o.jsx(y,{size:"medium",variant:"blank",fullWidth:!0,label:"–ù–µ—Ç",onClick:()=>s("no",p),isDisabled:i,sx:{display:r||a?"none":"flex"}}),o.jsx(y,{size:"medium",variant:"blank",fullWidth:!0,label:"–û—Ç–º–µ–Ω–∞",onClick:()=>s("cancel",p),sx:{display:n||a?"none":"flex"},isDisabled:i})]})]})})},Oe=({action:t,children:e,disabled:s=!1,handleBeforeRemove:a=void 0,sx:n={},title:r="–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ –¥–∞–Ω–Ω—É—é –∑–∞–ø–∏—Å—å?",...i})=>{const[l,d]=c.useState(!1),[u,f]=c.useState(""),[x,p]=c.useState(!1),g=async(j,H)=>{try{switch(j){case"yes":return p(!0),await t(H);case"no":return;default:return}}catch(Y){Ke(Y)}finally{d(!1),p(!1)}},h=async()=>{d(!0);const j=await a?.();f(j||"")},C=j=>c.cloneElement(j,{onClick:h});return o.jsxs(o.Fragment,{children:[e?C(e):o.jsx(y,{label:"–£–¥–∞–ª–∏—Ç—å",icon:"DeleteIcon",color:"error",onClick:h,disabled:s,sx:n,...i}),o.jsx(Ve,{title:r,open:l,onClose:g,disableCancel:!0,isLoading:x,children:u})]})};function z({id:t,item:e,data:s,error:a,create:n,update:r,deleteItem:i,isLoading:l,onCloseModal:d,fields:u}){const f=e?.id??t;return o.jsx(Ae,{id:f,data:e||s,elements:{fields:u},crud:{create:n,update:r},error:a,isLoading:l,onCloseModal:d,children:f?o.jsx(Oe,{action:()=>i({variables:{id:f}}),disabled:l}):null})}function Xe(){const{data:t,error:e,...s}=ue();return c.useEffect(()=>{e&&b("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",e)},[e]),{...s,data:t?.persons??[],error:e}}const v=[{query:ge},{query:he}];function Ze(t){const e=fe({variables:{id:t},skip:t==null}),[s,a]=pe({refetchQueries:v}),[n,r]=me({refetchQueries:v}),[i,l]=xe({refetchQueries:v});return c.useEffect(()=>{e.error&&b("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",e.error)},[e.error]),{person:e,create:s,update:n,deleteItem:async(...u)=>T(i(...u),{pending:"–£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è...",success:"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω!",error:"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."}),createPersonResult:a,updatePersonResult:r,deletePersonResult:l,isLoading:e.loading||a.loading||r.loading||l.loading}}function et(){const{data:t,error:e,...s}=ye();return c.useEffect(()=>{e&&b("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–ø–∏—Å–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤",e)},[e]),{...s,data:t?.facilities??[],error:e}}const w=[{query:Me}];function tt(t){const e=be({variables:{id:t},skip:t==null}),[s,a]=je({refetchQueries:w}),[n,r]=Ce({refetchQueries:w}),[i,l]=Se({refetchQueries:w});return c.useEffect(()=>{e.error&&b("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–∞",e.error)},[e.error]),{facility:e,create:s,update:n,deleteItem:async(...u)=>T(i(...u),{pending:"–£–¥–∞–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞...",success:"–û–±—ä–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω!",error:"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–∞."}),createFacilityResult:a,updateFacilityResult:r,deleteFacilityResult:l,isLoading:a.loading||r.loading||l.loading}}const st=({label:t,children:e,isDisabled:s=!1})=>{const[a,n]=c.useState(!1),r=()=>n(!1);return o.jsxs(m,{children:[o.jsx(y,{label:t,icon:"AddIcon",onClick:()=>n(!0),isDisabled:s}),o.jsx(Ne,{title:t,open:a,onClose:r,children:o.jsx(e,{onCloseModal:r})})]})},J=({data:t,loading:e,error:s,addButtonLabel:a,children:n})=>{const[r,i]=c.useState(null);return o.jsxs(m,{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2,height:"100%",children:[o.jsx(_,{flex:1,minHeight:0,children:o.jsx($e,{items:t,labelKey:"name",setSelectedItem:i,isLoading:e,error:s,cardActions:o.jsx(st,{isDisabled:e,label:a,children:n})})}),o.jsx($,{cardContentProps:{sx:{p:1.5}},enablePaddingBottom:!0,children:o.jsx(m,{sx:{minHeight:0,display:"flex",flexDirection:"column","@media (max-width: 600px)":{flex:1}},children:r?o.jsx(n,{item:r}):null})})]})},ot=t=>{const{facility:{data:e,error:s},create:a,update:n,deleteItem:r,isLoading:i}=tt(t.item?void 0:t.id);return o.jsx(z,{...t,data:e?.facility,error:s,create:a,update:n,deleteItem:r,isLoading:i,fields:at})},at={name:{name:"name",label:"–û–±—ä–µ–∫—Ç",type:E,required:!0}},nt=()=>{const{data:t,loading:e,error:s}=et();return o.jsx(J,{data:t,loading:e,error:s,addButtonLabel:"–î–æ–±–∞–≤–∏—Ç—å –æ–±—ä–µ–∫—Ç",children:ot})};function rt(){const{data:t,error:e,...s}=Ee();return c.useEffect(()=>{e&&b("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–ø–∏—Å–∫–∞ –≤–∏–¥–æ–≤ —Ä–∞–±–æ—Ç",e)},[e]),{...s,data:t?.jobs??[],error:e}}const I=[{query:Re}];function it(t){const e=De({variables:{id:t},skip:t==null}),[s,a]=ve({refetchQueries:I}),[n,r]=we({refetchQueries:I}),[i,l]=Ie({refetchQueries:I});return c.useEffect(()=>{e.error&&b("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö –≤–∏–¥–∞ —Ä–∞–±–æ—Ç",e.error)},[e.error]),{job:e,create:s,update:n,deleteItem:async(...u)=>T(i(...u),{pending:"–£–¥–∞–ª–µ–Ω–∏–µ –≤–∏–¥–∞ —Ä–∞–±–æ—Ç...",success:"–í–∏–¥ —Ä–∞–±–æ—Ç —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω!",error:"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –≤–∏–¥–∞ —Ä–∞–±–æ—Ç—ã."}),createJobResult:a,updateJobResult:r,deleteJobResult:l,isLoading:a.loading||r.loading||l.loading}}const lt=t=>{const{job:{data:e,error:s},create:a,update:n,deleteItem:r,isLoading:i}=it(t.item?void 0:t.id);return o.jsx(z,{...t,data:e?.job,error:s,create:a,update:n,deleteItem:r,isLoading:i,fields:ct})},ct={name:{name:"name",label:"–í–∏–¥ —Ä–∞–±–æ—Ç—ã",type:E,required:!0}},dt=()=>{const{data:t,loading:e,error:s}=rt();return o.jsx(J,{data:t,loading:e,error:s,addButtonLabel:"–î–æ–±–∞–≤–∏—Ç—å –æ–±—ä–µ–∫—Ç",children:lt})},ut=t=>{const{person:{data:e,error:s},create:a,update:n,deleteItem:r,isLoading:i}=Ze(t.item?void 0:t.id);return o.jsx(z,{...t,data:e?.person,error:s,create:a,update:n,deleteItem:r,isLoading:i,fields:ft})},ft={name:{name:"name",label:"–§–ò–û",type:E,required:!0},email:{name:"email",label:"Email",type:E}},pt=()=>{const{data:t,loading:e,error:s}=Xe();return o.jsx(J,{data:t,loading:e,error:s,addButtonLabel:"–î–æ–±–∞–≤–∏—Ç—å –ª–∏—Ü–æ",children:ut})},mt=[{label:"–õ–∏—Ü–∞",component:o.jsx(pt,{})},{label:"–û–±—ä–µ–∫—Ç—ã",component:o.jsx(nt,{})},{label:"–í–∏–¥—ã —Ä–∞–±–æ—Ç",component:o.jsx(dt,{})}],xt=()=>o.jsx(Pe,{tabs:mt}),jt=()=>o.jsx(xt,{});export{jt as SettingsPage};
